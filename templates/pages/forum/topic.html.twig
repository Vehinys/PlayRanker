{% extends 'base.html.twig' %}

{% block title %} FORUM - TOPIC {% endblock %}

{% block body %}

<div class='flex p-12'>  
    <section class="flex">
        <table>
            {# Boucle à travers chaque catégorie #}
            {% for category in categories %}
            <tr>
                <td class='text-4xl pb-5 pt-5 text-[#ECC33E] hover:text-[#ebf1ff]'>
                    {# Lien vers le topic correspondant avec l'identifiant de la catégorie et de l'id du topic #}
                    <a href="{{ path('topic', { categoryId: category.id, id: category.id }) }}">
                        {# Affiche le nom des catégories #}
                        {{ category.name }}
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>  
    </section>

    <!-- Séparateur entre les sections -->
    <section class="ml-7"> 
        <div class="border-l-2 border-[#ebf1ff] h-full flex"></div>  
    </section>

    <section class="mx-7">
        <div>
            {% for topic in topics %}
                <div class="bg-[#dbe1f0] text-[#000000] rounded bg-[#ebf1ff] py-4 px-8 my-3 hover:bg-[#09172b] hover:text-[#ebf1ff]">
                    <a href="{{ path('post', {id: topic.id}) }}">
                        <h3 class="font-black text-2xl mr- 10 mb-5">{{ topic.title }}</h3>
                        <div class="flex items-center justify-between">
                            <div>
                                By {{ topic.user.pseudo }} - {{ topic.createdAt | date('Y M d') }}
                            </div>
                            <div class="flex space-x-2">
                                <!-- Bouton pour modifier le topic -->
                                <a href="{{ path('topic_edit', { id: topic.id }) }}" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">
                                    Edit
                                </a>
                                <!-- Formulaire pour supprimer le topic -->
                                <form action="{{ path('topic_delete', { id: topic.id }) }}" method="post" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce topic ?');">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ topic.id) }}">
                                    <button type="submit" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">
                                        Delete
                                    </button>
                                </form>
                            </div>
                        </div>
                    </a>
                </div>
            {% else %}
                <p>Aucun topic disponible.</p>
            {% endfor %}
        </div>
    </section>
</div>


<section class="text-center p-4">

    <div>
        <a href="{{ path('topic_new', { categoryId: category.id }) }}" class="bg-[#ebf1ff] text-[#0C1D36] py-2 px-4 rounded hover:bg-[#ECC33E] transition duration-200">
            Create a new topic in {{ category.name }}
        </a>
    </div>
    
</section>



{% endblock %}
